package org.openlca.jsonld.io;

import static org.junit.Assert.assertEquals;

import java.io.File;
import java.nio.file.Files;
import java.nio.file.Path;

import org.junit.Test;
import org.openlca.jsonld.ZipStore;

public class ReOpenTest {

	@Test
	public void testReOpen() throws Exception {
		Path p = Files.createTempFile("_olca_", ".zip");
		Files.delete(p);
		File f = p.toFile();
		ZipStore store = ZipStore.open(f);
		store.put("test/file.txt", "Test".getBytes());
		store.close();

		store = ZipStore.open(f);
		byte[] data = store.getBytes("test/file.txt");
		assertEquals("Test", new String(data));
		store.put("test/file.txt", "Next".getBytes());
		store.close();

		store = ZipStore.open(f);
		data = store.getBytes("test/file.txt");
		assertEquals("Next", new String(data));
		f.delete();
	}

}
